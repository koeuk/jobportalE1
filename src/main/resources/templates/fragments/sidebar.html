<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<body>
    <!-- Sidebar for Recruiters -->
    <div th:fragment="sidebar(activePage)">
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-brand">
                <a th:href="@{/}">
                    <i class="fas fa-briefcase"></i> Job Portal
                </a>
            </div>
            <ul class="sidebar-nav">
                <li th:classappend="${activePage == 'dashboard'} ? 'active' : ''">
                    <a th:href="@{/dashboard}"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                </li>
                <li th:classappend="${activePage == 'jobs'} ? 'active' : ''">
                    <a th:href="@{/jobs}"><i class="fas fa-briefcase"></i> Jobs</a>
                </li>
                <li th:classappend="${activePage == 'post-job'} ? 'active' : ''">
                    <a th:href="@{/jobs/new}"><i class="fas fa-plus-circle"></i> Post Job</a>
                </li>
                <li th:classappend="${activePage == 'applications'} ? 'active' : ''">
                    <a th:href="@{/applications}"><i class="fas fa-file-alt"></i> Applications</a>
                </li>
                <li th:classappend="${activePage == 'profile'} ? 'active' : ''">
                    <a th:href="@{/profile}"><i class="fas fa-user"></i> Profile</a>
                </li>
                <li th:classappend="${activePage == 'users'} ? 'active' : ''">
                    <a th:href="@{/admin/users}"><i class="fas fa-users"></i> Users</a>
                </li>
                <li th:classappend="${activePage == 'user-types'} ? 'active' : ''">
                    <a th:href="@{/admin/user-types}"><i class="fas fa-tags"></i> User Types</a>
                </li>
            </ul>
            <div class="sidebar-footer">
                <form th:action="@{/logout}" method="post">
                    <button type="submit" class="sidebar-logout-btn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </form>
            </div>
        </nav>
        <button class="sidebar-toggle d-lg-none" id="sidebarToggle">
            <i class="fas fa-bars"></i>
        </button>
        <script>
            document.getElementById('sidebarToggle').addEventListener('click', function() {
                document.getElementById('sidebar').classList.toggle('show');
            });
        </script>
    </div>

    <!-- Top navbar for Job Seekers: Home, Jobs, Profile, Logout -->
    <div th:fragment="topbar(activePage)">
        <nav class="navbar navbar-expand-lg navbar-dark" style="background: #1565C0;">
            <div class="container">
                <a class="navbar-brand" th:href="@{/}">
                    <i class="fas fa-briefcase"></i> Job Portal
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#seekerNavbar">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="seekerNavbar">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item" th:classappend="${activePage == 'home'} ? 'active' : ''">
                            <a class="nav-link" th:href="@{/}"><i class="fas fa-home"></i> Home</a>
                        </li>
                        <li class="nav-item" th:classappend="${activePage == 'jobs'} ? 'active' : ''">
                            <a class="nav-link" th:href="@{/jobs}"><i class="fas fa-briefcase"></i> Jobs</a>
                        </li>
                        <li class="nav-item" th:classappend="${activePage == 'profile'} ? 'active' : ''">
                            <a class="nav-link" th:href="@{/profile}"><i class="fas fa-user"></i> Profile</a>
                        </li>
                        <li class="nav-item">
                            <form th:action="@{/logout}" method="post" class="d-inline">
                                <button type="submit" class="btn btn-link nav-link"><i class="fas fa-sign-out-alt"></i> Logout</button>
                            </form>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>

    <!-- Top navbar for Guests: Home, Jobs, Login, Register -->
    <div th:fragment="guestbar(activePage)">
        <nav class="navbar navbar-expand-lg navbar-dark" style="background: #1565C0;">
            <div class="container">
                <a class="navbar-brand" th:href="@{/}">
                    <i class="fas fa-briefcase"></i> Job Portal
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#guestNavbar">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="guestNavbar">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item" th:classappend="${activePage == 'home'} ? 'active' : ''">
                            <a class="nav-link" th:href="@{/}"><i class="fas fa-home"></i> Home</a>
                        </li>
                        <li class="nav-item" th:classappend="${activePage == 'jobs'} ? 'active' : ''">
                            <a class="nav-link" th:href="@{/jobs}"><i class="fas fa-briefcase"></i> Jobs</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" th:href="@{/login}"><i class="fas fa-sign-in-alt"></i> Login</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link btn text-white ml-2" style="background: #F5A623;" th:href="@{/register}"><i class="fas fa-user-plus"></i> Register</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
</body>
</html>
